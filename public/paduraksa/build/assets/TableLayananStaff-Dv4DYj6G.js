import{r as l,a as M,j as e,c as L}from"./app-e4jMZ1A-.js";import"./index-BP5ZlSPo.js";import{C as D,a as z}from"./clock-BGq8o9Ho.js";import{a as F,L as E,C as I,E as U}from"./loader-circle-CX3sZwgb.js";/* empty css            */import"./createLucideIcon-B64HR7v-.js";function Q({data:N}){const j=N,[r,k]=l.useState(""),[n,c]=l.useState(1),[a,g]=l.useState(null),[w,o]=l.useState(!1),[A,y]=l.useState(!1),[K,v]=l.useState(""),[B,h]=l.useState(""),[$,b]=l.useState(""),[q,p]=l.useState(""),i=10,[_,x]=l.useState(!1),[S,u]=l.useState(null),C=M().props.auth.user,d=l.useMemo(()=>j.filter(s=>Object.values(s).some(t=>t?.toString().toLowerCase().includes(r.toLowerCase()))),[r,j]),T=l.useMemo(()=>{const s=(n-1)*i;return d.slice(s,s+i)},[d,n]),m=Math.ceil(d.length/i),P=s=>{g(s),o(!0)},f=()=>{g(null),o(!1),y(!1),v("")};return e.jsxs("div",{"data-theme":"light",children:[e.jsxs("div",{className:"mockup-window border border-base-300 bg-base-100 p-4",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Layanan"}),e.jsx("input",{type:"text",placeholder:"Cari...",className:"input input-bordered input-sm w-full max-w-xs",value:r,onChange:s=>{k(s.target.value),c(1)}})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-xs w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Tiket"}),e.jsx("th",{className:"hidden md:table-cell",children:"Nama"}),e.jsx("th",{className:"hidden md:table-cell",children:"Kategori"}),e.jsx("th",{className:"hidden lg:table-cell",children:"Layanan"}),e.jsx("th",{className:"hidden lg:table-cell",children:"Tanggal Pengajuan"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Pilihan"})]})}),e.jsx("tbody",{children:T.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:(n-1)*i+t+1}),e.jsx("td",{children:s.no_tiket}),e.jsx("td",{className:"hidden md:table-cell",children:s.nama_pemohon}),e.jsx("td",{className:"hidden md:table-cell",children:s.kategori_pengguna}),e.jsx("td",{className:"hidden lg:table-cell",children:s.nama_layanan}),e.jsx("td",{className:"hidden lg:table-cell",children:s.updated_at}),e.jsx("td",{children:e.jsxs("span",{className:s.status==="menunggu"?"badge-xs badge badge-neutral flex items-center gap-1":s.status==="diproses"?"badge-xs badge badge-warning flex items-center gap-1":s.status==="diterima"?"badge-xs badge badge-info flex items-center gap-1":s.status==="selesai"?"badge-xs badge badge-success flex items-center gap-1":s.status==="ditolak"?"badge-xs badge badge-error flex items-center gap-1":"badge",children:[s.status==="menunggu"&&e.jsx(D,{size:14}),s.status==="diproses"&&e.jsx(F,{size:14,className:"animate-spin"}),s.status==="diterima"&&e.jsx(E,{size:14}),s.status==="selesai"&&e.jsx(z,{size:14}),s.status==="ditolak"&&e.jsx(I,{size:14}),e.jsx("span",{className:"capitalize",children:s.status})]})}),e.jsx("td",{children:e.jsxs("button",{className:"btn btn-xs btn-accent",onClick:()=>{P(s),h(s.id),b(s.email),p(s.no_tiket)},children:[e.jsx(U,{}),"Detail"]})})]},s.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-sm",children:["Menampilkan ",(n-1)*i+1," -"," ",Math.min(n*i,d.length)," ","dari ",d.length]}),e.jsxs("div",{className:"join",children:[e.jsx("button",{className:"join-item btn btn-sm",disabled:n===1,onClick:()=>c(s=>Math.max(s-1,1)),children:"«"}),Array.from({length:m},(s,t)=>e.jsx("button",{className:`join-item btn btn-sm ${n===t+1?"btn-active":""}`,onClick:()=>c(t+1),children:t+1},t)),e.jsx("button",{className:"join-item btn btn-sm",disabled:n===m,onClick:()=>c(s=>Math.min(s+1,m)),children:"»"})]})]})]}),w&&a&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white text-black p-6 rounded-lg shadow-lg w-full max-w-5xl flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"w-full md:w-1/2 h-[300px] md:h-[500px] border rounded overflow-hidden",children:a.file_lampiran?e.jsx("iframe",{src:`/storage/${a.file_lampiran}`,className:"w-full h-full",title:"Preview PDF"}):e.jsx("div",{className:"text-center p-4",children:"Tidak ada file yang diunggah."})}),e.jsxs("div",{className:"w-full md:w-1/2 overflow-y-auto max-h-[300px] md:max-h-[500px]",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detail Pengajuan"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"No Tiket:"})," ",a.no_tiket??"Belum ada tiket"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Nama:"})," ",a.nama_pemohon]}),e.jsxs("li",{children:[e.jsx("strong",{children:"NIK/NIM:"})," ",a.identitas_pengguna]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Email:"})," ",a.email]}),e.jsxs("li",{children:[e.jsx("strong",{children:"No HP:"})," ",a.no_hp]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Alamat:"})," ",a.alamat]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Kategori:"})," ",a.kategori_pengguna]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Layanan:"})," ",a.nama_layanan]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Judul Layanan:"})," ",a.judul_layanan]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Tanggal Pengajuan:"})," ",a.tanggal_pengajuan]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Keterangan:"})," ",a.keterangan_tambahan]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Status:"})," ",a.status]}),e.jsxs("li",{children:[e.jsx("strong",{children:"PTSP:"})," ",a.name]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Catatan PTSP:"})," ",a.catatan]}),a.status==="ditolak"&&e.jsxs("li",{children:[e.jsx("strong",{children:"Alasan Penolakan:"})," ",a.keterangan_tiket]})]}),e.jsx("div",{className:"mt-6 flex flex-col md:flex-row justify-end gap-2",children:a.status==="diproses"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-success",onClick:()=>{o(!1),x(!0)},children:"Tindak Lanjut"}),e.jsx("button",{className:"btn",onClick:()=>{f(),h("")},children:"Tutup"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-success",children:"Unduh Tindak Lanjut"}),e.jsx("button",{className:"btn",onClick:()=>{f(),h(""),b(""),p("")},children:"Tutup"})]})})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white text-black p-6 rounded-lg shadow-lg w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Unggah File Tindak Lanjut"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=new FormData;t.append("file_lampiran",S),t.append("id_permohonan",a.id),t.append("id_users",C.id),t.append("no_tiket",a.no_tiket),L.post(route("tindak_lanjut_staff"),t,{forceFormData:!0,onSuccess:()=>{x(!1),u(null)}})},children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"file",onChange:s=>u(s.target.files[0]),className:"file-input file-input-bordered w-full",required:!0})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",className:"btn",onClick:()=>{x(!1),u(null)},children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Unggah"})]})]})]})})]})}export{Q as default};
