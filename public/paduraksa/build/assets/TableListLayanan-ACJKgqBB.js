import{r,j as a,b as y}from"./app-e4jMZ1A-.js";import{d as k}from"./index-BP5ZlSPo.js";import{c as T}from"./createLucideIcon-B64HR7v-.js";import{X as A}from"./x-C_Cz4HFZ.js";/* empty css            *//**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],H=T("badge-check",D);function F({datalist:f}){const[N,w]=r.useState(""),[c,v]=r.useState(""),[d,h]=r.useState(1),[C,x]=r.useState(f),m=10,[L,p]=r.useState(null),_=e=>{y.delete(`/layanans/${e}`).then(s=>{alert(s.data.message),x(n=>n.filter(o=>o.id!==e))}).catch(()=>{alert("Gagal menghapus layanan.")})},[l,g]=r.useState({kategori_pengguna:"",nama_layanan:"",deskripsi:"",status:"aktif",syarat:[""]}),[t,i]=r.useState({id:null,nama_layanan:"",deskripsi:"",status:"",syarat:[""]}),u=e=>{g({...l,[e.target.name]:e.target.value})},S=e=>{e.preventDefault(),k.Inertia.post("/listLayanan",l,{onSuccess:s=>{x(n=>[{...l,id:Date.now()},...n]),document.getElementById("modalTambah").close(),g({kategori_pengguna:"",nama_layanan:"",deskripsi:"",status:""})},onError:s=>{alert("Terjadi kesalahan saat menambah layanan.")}})},E=async e=>{try{const{data:s}=await y.get(`/layananget/${e}`);i({id:s.id,nama_layanan:s.nama_layanan,deskripsi:s.deskripsi,status:s.status,syarat:s.syarat?.length?s.syarat:[""]}),document.getElementById("modalUpdate").showModal()}catch(s){console.error("Gagal ambil data layanan",s)}},B=e=>{if(e.preventDefault(),!t.deskripsi.trim()){alert("Deskripsi tidak boleh kosong!");return}k.Inertia.put(`/layanans/${t.id}`,t,{onSuccess:()=>{x(s=>s.map(n=>n.id===t.id?{...n,...t}:n)),document.getElementById("modalUpdate")?.close()},onError:()=>{alert("Gagal update layanan.")}})},j=C.filter(e=>e.kategori_pengguna.toLowerCase().includes(c.toLowerCase())||e.nama_layanan.toLowerCase().includes(c.toLowerCase())||e.status.toLowerCase().includes(c.toLowerCase())),b=Math.ceil(j.length/m),I=j.slice((d-1)*m,d*m);return a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[a.jsx("h2",{className:"text-base sm:text-lg md:text-xl font-bold truncate",children:"Daftar Layanan"}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto",children:[a.jsx("button",{className:"btn btn-primary w-full sm:w-auto",onClick:()=>document.getElementById("modalTambah").showModal(),children:"+ Tambah"}),a.jsx("input",{type:"text",placeholder:"Cari data...",value:c,onChange:e=>v(e.target.value),className:"input input-bordered w-full sm:w-64"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"table table-xs",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"No"}),a.jsx("th",{className:"hidden sm:table-cell",children:"Kategori"}),a.jsx("th",{children:"Nama Layanan"}),a.jsx("th",{className:"hidden sm:table-cell",children:"Deskripsi"}),a.jsx("th",{children:"Aktif"}),a.jsx("th",{children:"Pilihan"})]})}),a.jsx("tbody",{children:I.map((e,s)=>a.jsxs("tr",{children:[a.jsx("th",{children:(d-1)*m+s+1}),a.jsx("td",{className:"hidden sm:table-cell",children:e.kategori_pengguna}),a.jsx("td",{className:"max-w-[120px] break-words",children:e.nama_layanan}),a.jsx("td",{className:"hidden sm:table-cell",children:e.deskripsi}),a.jsx("td",{children:e.status==="aktif"?a.jsx(H,{className:"text-green-500"}):a.jsx(A,{className:"text-red-500"})}),a.jsxs("td",{className:"flex flex-col sm:flex-row gap-1",children:[a.jsx("button",{className:"btn btn-xs btn-secondary",onClick:()=>{p(e.id),w(e.nama_layanan),document.getElementById("modalHapus").showModal()},children:"Hapus"}),a.jsx("button",{className:"btn btn-xs btn-info",children:"Lihat"}),a.jsx("button",{className:"btn btn-xs btn-warning",onClick:()=>E(e.id),children:"Update"})]})]},e.id))})]})}),a.jsx("dialog",{id:"modalTambah",className:"modal",children:a.jsxs("div",{className:"modal-box",children:[a.jsx("h3",{className:"font-bold text-lg",children:"Tambah Layanan"}),a.jsxs("form",{onSubmit:S,className:"space-y-2",children:[a.jsxs("select",{name:"kategori_pengguna",value:l.kategori_pengguna,onChange:u,className:"select select-bordered w-full",children:[a.jsx("option",{value:"",children:"Pilih Kategori"}),a.jsx("option",{value:"mahasiswa",children:"Mahasiswa"}),a.jsx("option",{value:"alumni",children:"Alumni"}),a.jsx("option",{value:"dosen",children:"Dosen / Pegawai"}),a.jsx("option",{value:"umum",children:"Umum"})]}),a.jsx("input",{type:"text",name:"nama_layanan",value:l.nama_layanan,onChange:u,placeholder:"Nama Layanan",className:"input input-bordered w-full",required:!0}),a.jsx("textarea",{name:"deskripsi",value:l.deskripsi,onChange:u,placeholder:"Deskripsi Layanan",className:"textarea textarea-bordered w-full",required:!0}),a.jsxs("select",{name:"status",value:l.status,onChange:u,className:"select select-bordered w-full",children:[a.jsx("option",{value:"aktif",children:"Aktif"}),a.jsx("option",{value:"tidak",children:"Tidak Aktif"})]}),a.jsxs("div",{className:"modal-action",children:[a.jsx("button",{type:"button",className:"btn",onClick:()=>document.getElementById("modalTambah").close(),children:"Batal"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Simpan"})]})]})]})}),a.jsx("dialog",{id:"modalHapus",className:"modal",children:a.jsxs("div",{className:"modal-box",children:[a.jsx("h3",{className:"font-bold text-lg",children:"Hapus Layanan"}),a.jsxs("p",{children:["Apakah Anda yakin ingin menghapus layanan ",N,"? "]}),a.jsxs("span",{className:"text-red-500 text-xs",children:[a.jsx("strong",{children:"PERHATIAN:"})," Tindakan ini dapat mengakibatkan kehilangan data yang tidak dapat dikembalikan."]}),a.jsxs("div",{className:"modal-action",children:[a.jsx("button",{className:"btn",onClick:()=>{document.getElementById("modalHapus").close(),p(null)},children:"Batal"}),a.jsx("button",{className:"btn btn-error",onClick:()=>{_(L),document.getElementById("modalHapus").close(),p(null)},children:"Hapus"})]})]})}),a.jsx("dialog",{id:"modalUpdate",className:"modal modal-bottom sm:modal-middle",children:a.jsxs("div",{className:"modal-box w-full max-w-lg",children:[a.jsx("h3",{className:"font-bold text-lg mb-4",children:"Update Layanan"}),a.jsxs("form",{onSubmit:B,className:"space-y-4",children:[a.jsxs("span",{className:"block text-sm font-medium",children:["Nama Layanan : ",t.nama_layanan]}),a.jsx("textarea",{name:"deskripsi",className:"textarea textarea-bordered w-full",placeholder:"Masukkan deskripsi layanan",value:t.deskripsi,onChange:e=>i({...t,deskripsi:e.target.value}),required:!0}),a.jsxs("select",{name:"status",className:"select select-bordered w-full",value:t.status,onChange:e=>i({...t,status:e.target.value}),children:[a.jsx("option",{value:"aktif",children:"Aktif"}),a.jsx("option",{value:"tidak",children:"Tidak Aktif"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text",children:"Syarat Layanan"})}),t.syarat.map((e,s)=>a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-2",children:[a.jsx("input",{type:"text",className:"input input-bordered flex-1",placeholder:`Syarat ${s+1}`,value:e,onChange:n=>{const o=[...t.syarat];o[s]=n.target.value,i({...t,syarat:o})},required:!0}),a.jsx("button",{type:"button",className:"btn btn-error btn-sm w-full sm:w-auto",onClick:()=>i({...t,syarat:t.syarat.filter((n,o)=>o!==s)}),children:"Hapus"})]},s)),a.jsx("button",{type:"button",className:"btn btn-sm btn-secondary w-full sm:w-auto",onClick:()=>i({...t,syarat:[...t.syarat,""]}),children:"+ Tambah Syarat"})]}),a.jsxs("div",{className:"modal-action flex flex-col sm:flex-row gap-2",children:[a.jsx("button",{type:"button",className:"btn w-full sm:w-auto",onClick:()=>document.getElementById("modalUpdate").close(),children:"Batal"}),a.jsx("button",{type:"submit",className:"btn btn-primary w-full sm:w-auto",children:"Simpan"})]})]})]})}),a.jsxs("div",{className:"flex justify-center mt-4 gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:()=>h(e=>Math.max(e-1,1)),disabled:d===1,children:"«"}),[...Array(b)].map((e,s)=>a.jsx("button",{className:`btn btn-sm ${d===s+1?"btn-active":""}`,onClick:()=>h(s+1),children:s+1},s)),a.jsx("button",{className:"btn btn-sm",onClick:()=>h(e=>Math.min(e+1,b)),disabled:d===b,children:"»"})]})]})}export{F as default};
